<div class="form-overlay">
  <div class="form-container">
    <!-- HEADER -->
    <div class="form-header">
      <div class="header-title">
        <i class="fas fa-user-plus header-icon"></i>
        <h4>Create Consignee</h4>
      </div>
      <i class="bi bi-x close-icon" (click)="closeBtn()"></i>
    </div>

    <!-- FORM -->
    <form #consigneeForm="ngForm" (ngSubmit)="onSubmit(consigneeForm)" class="form-content">

      <!-- BUSINESS DETAILS -->
      <div class="form-section shadow-sm border-line mb-3 ">
        <div class="section-header">
          <i class="bi bi-building section-icon"></i>
          <h5>Business Details</h5>
        </div>
        <div class="row ">



        
          
          <!-- Mobile -->
        <div class="col-md-6">
  <div class="row align-items-center mb-1">
    <!-- Label -->
    <label class="form-label mb-0 col-2 d-flex">Mobile <span class="required">*</span></label>

    <div class="col-10">
      <div class="input-group input-group-sm">
        <!-- Left icon -->
        <span class="input-group-text bg-light">
          <i class="fas fa-mobile-alt text-primary"></i>
        </span>

        <!-- Input -->
   <input type="tel"
       class="form-control"
       name="mobile"
       [(ngModel)]="consigneeFormData.cneMobileNo"
       #mobile="ngModel"
       required
       maxlength="10"
       pattern="^[6-9][0-9]{9}$"
       (keypress)="allowOnlyNumbers($event)"
       placeholder="Mobile number"
       (keydown.enter)="focusNext($event)">




        <!-- Error icon (only shows when invalid) -->
        <span *ngIf="mobile.invalid && mobile.touched"
              class="input-group-text text-danger"
              data-toggle="tooltip"
              data-placement="top"
              title="Enter valid 10-digit mobile number">
          <i class="bi bi-exclamation-circle"></i>
        </span>

        <!-- Verify button -->
       <span type="button" 
      class="btn btn-outline-success verify-btn" 
      title="Verify"
      (click)="verifyMobile()">

  <!-- Verified (Success) -->
  <i *ngIf="isVerified === true" class="bi bi-check-circle-fill text-success"></i>

  <!-- Not Verified (Failed) -->
  <i *ngIf="isVerified === false" class="bi bi-shield-check"></i>

  <!-- Default (Not Checked Yet) -->
  <i *ngIf="isVerified === null" class="bi bi-shield-check"></i>
</span>

      </div>
    </div>
  </div>
</div>


          <!-- PAN -->
          <div class="col-md-6">
            <div class="row align-items-center mb-1">
              <label class="form-label mb-0 col-2 d-flex text-nowrap">PAN No</label>

              
              <div class="col-10">
                <div class="input-group input-group-sm">
                  <span class="input-group-text bg-light">
                    <i class="fas fa-id-card text-primary"></i>
                  </span>
                  <input type="text" class="form-control text-uppercase"
                         name="pan"
                         (keydown.enter)="focusNext($event)"
                         [(ngModel)]=" consigneeFormData.cnePan"
                         #pan="ngModel"
                         pattern="^[A-Z]{5}[0-9]{4}[A-Z]{1}$"
                         placeholder="PAN number">
                          <span type="button" class="btn btn-outline-success verify-btn" title="Verify">
          <i class="bi bi-shield-check"></i>
        </span>
                </div>
               
              </div>
            </div>
          </div>

          <!-- GSTIN -->
          <div class="col-md-6">
            <div class="row align-items-center mb-1">
              <label class="form-label col-2 mb-0">GSTIN</label>
              
              <div class="col-10">
                <div class="input-group input-group-sm">
                  <span class="input-group-text bg-light">
                    <i class="fas fa-receipt text-primary"></i>
                  </span>
                  <input type="text" class="form-control text-uppercase"
                         name="gstin"
                         (keydown.enter)="focusNext($event)"
                         [(ngModel)]="consigneeFormData.cneGstIn"
                         maxlength="15"
                         pattern="^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$"
                         placeholder="GSTIN">
                  <span type="button" class="btn btn-outline-success verify-btn" title="Verify GSTIN" >
                    <i class="bi bi-shield-check"></i>
                  </span>
                </div>
               
              </div>
            </div>
          </div>

          <!-- Customer Code -->
          <div class="col-md-6">
            <div class="row align-items-center mb-1">
             
                <label class="form-label mb-0 col-2">Code</label>
           
              <div class="col-10">
                <div class="input-group input-group-sm">
                  <span class="input-group-text bg-light">
                    <i class="fas fa-hashtag text-primary"></i>
                  </span>
                  <input type="text" class="form-control"
                  (keydown.enter)="focusNext($event)"
                         name="code"
                         [(ngModel)]="consigneeFormData.cneCode"
                         placeholder="Customer code"
                         maxlength="10"
                         >
                </div>
              </div>
            </div>
          </div>

          <!-- Name -->
          <div class="col-md-12">
            <div class="row align-items-center mb-1">
             
                <label class="form-label mb-0 col-1 d-flex">Name <span class="required">*</span></label>
              
              <div class="col-11">
                <div class="input-group input-group-sm">
                  <span class="input-group-text bg-light">
                    <i class="fas fa-id-card text-primary"></i>
                  </span>
                  <input type="text" class="form-control"
                         name="name"
                         (keydown.enter)="focusNext($event)"
                         [(ngModel)]="consigneeFormData.cneName"
                         #name="ngModel"
                         required
                         placeholder="Enter your Name"
                         >
                          <span *ngIf="name.invalid && name.touched"
              class="input-group-text text-danger"
              data-toggle="tooltip"
              data-placement="top"
              title="Enter Name">
          <i class="bi bi-exclamation-circle"></i>
        </span>
                </div>
                <div class="invalid-feedback" *ngIf="name.invalid && name.touched">
                  Name is required
                </div>
              </div>
            </div>
          </div>

          <!-- Checkbox -->
   <div class="col-1">

   </div>
         <div class="col-7">
  <div class="form-check-custom">
    <input class="form-check-input"
           type="checkbox"
           id="billingParty"
           name="billingParty"
           [(ngModel)]="consigneeFormData.cneCreateAcm"
           (keydown.enter)="focusNext($event)">
    <label class="form-check-label" for="billingParty">
      <i class="fas fa-file-invoice me-1"></i> Use as Billing Party
    </label>
  </div>
</div>

        </div>
      </div>

      <!-- ADDRESS INFO -->
   <div class="form-section shadow-sm border-line mb-3">
  <div class="section-header">
    <i class="bi bi-geo-alt section-icon"></i>
    <h5>Address Information</h5>
  </div>

  <div class="row">
    <!-- Address -->
    

 <div class="col-md-12">
      <div class="row align-items-center mb-1">
        <label class="form-label col-1 mb-0 d-flex">Address <span class="text-danger">*</span></label>
        <div class="col-11">
          <div class="input-group input-group-sm">
            <!-- <span class="input-group-text bg-light">
              <i class="bi bi-phone text-primary"></i>
            </span> -->
            <input type="text"
               class="form-control"
               name="address"
               [(ngModel)]="consigneeFormData.cneAddress"
               #address="ngModel"
               (keydown.enter)="focusNext($event)"
               required
               placeholder="Complete address"
             >

                <span *ngIf="address.invalid && address.touched"
              class="input-group-text text-danger"
              data-toggle="tooltip"
              data-placement="top"
              title="Enter address">
          <i class="bi bi-exclamation-circle"></i>
        </span>
          </div>
        </div>
      </div>
    </div>

     
       
 

    <!-- City -->
    <div class="col-md-6">
      <div class="row align-items-center mb-1">
  <label class="form-label col-2 mb-0">City <span class="text-danger">*</span></label>
  <div class="col-10">
      <div class="input-group input-group-sm">
      
        <select class="form-control form-control-sm"
                name="city"
                [(ngModel)]="consigneeFormData.cneCtyId"
                #city="ngModel"
                (keydown.enter)="focusNext($event)"
                required
                aria-label="Choose a city"
                >
          <option value="0">Select City</option>
          <option value="1">Mumbai</option>
          <option value="2">Delhi</option>
          <option value="3">Bangalore</option>
          <option value="4">Pune</option>
        </select>
         <span *ngIf="city.invalid && city.touched"
              class="input-group-text text-danger"
              data-toggle="tooltip"
              data-placement="top"
              title="Enter address">
          <i class="bi bi-exclamation-circle"></i>
        </span>
      </div></div></div>
     
    </div>

    <!-- PIN -->
    <div class="col-md-6">
      <div class="row align-items-center mb-1">
        <label class="form-label col-2 mb-0">PIN</label>
        <div class="col-10">
          <div class="input-group input-group-sm">
        <input type="text" maxlength="6"
               class="form-control"
               name="pinCode"
               (keydown.enter)="focusNext($event)"
               [(ngModel)]="consigneeFormData.cnePinCode"
               #pinCode="ngModel"
               maxlength="6"
               (keydown)="allowOnlyNumbers($event)"
               placeholder="PIN code">
        <span type="button" class="btn btn-outline-success verify-btn" title="Verify PIN">
          <i class="bi bi-shield-check"></i>
        </span>
      </div></div></div>
      
    </div>

    <!-- State -->
    <div class="col-md-6">
      <div class="row align-items-center mb-1"> 
         <label class="col-2 mb-0 form-label ">State</label>
         <div class="col-10">
          
      <div class="input-group input-group-sm">
      
        <select class="form-control form-control-sm"
                name="state"
                (keydown.enter)="focusNext($event)"
                [(ngModel)]="consigneeFormData.cneStaId"
                aria-label="Choose a state"
                >
          <option value="0">Select State</option>
          <option value="1">Maharashtra</option>
          <option value="2">Delhi</option>
          <option value="3">Karnataka</option>
          <option value="4">Gujarat</option>
        </select></div></div>
      </div>
    </div>

    <!-- Country -->
    <div class="col-md-6">
      <div class="row align-items-center mb-1">
         <label class="col-2 mb-0 form-label">Country</label>
         <div class="col-10">
      <div class="input-group input-group-sm">
       
        <select class="form-control form-control-sm"
                name="country"
                (keydown.enter)="focusNext($event)"
                [(ngModel)]="consigneeFormData.cneCntId"
                aria-label="Choose a country"
                >
          <option value="0">India</option>
          <option value="1">United States</option>
          <option value="2">United Kingdom</option>
        </select>
      </div></div></div>
    </div>
  </div>
</div>

      
<!-- Contact Details Section -->
<div class="form-section shadow-sm mb-3">
  <div class="section-header">
    <i class="bi bi-telephone section-icon"></i>
    <h5>Contact Details</h5>
  </div>

  <div class="row">

    <!-- Mobile -->
   <div class="col-md-6">
  <div class="row align-items-center mb-1">
    <label class="form-label col-2 mb-0">Contact</label>
    <div class="col-10">
      <div class="input-group input-group-sm">
        <span class="input-group-text bg-light">
          <i class="bi bi-person-lines-fill text-primary"></i>
        </span>
        <input type="tel"
               class="form-control"
               name="contact"
               [(ngModel)]="consigneeFormData.cneContactPerson"
               placeholder="Contact number"
               (keydown.enter)="focusNext($event)">
       
      </div>
    </div>
  </div>
</div>


    <!-- Landline -->
    <div class="col-md-6">
      <div class="row align-items-center mb-1">
        <label class="form-label col-2 mb-0">Landline</label>
        <div class="col-10">
          <div class="input-group input-group-sm">
            <span class="input-group-text bg-light">
              <i class="bi bi-telephone text-primary"></i>
            </span>
            <input type="tel" class="form-control" placeholder="Landline number"
             (keydown.enter)="focusNext($event)"
             name="landline"
             maxlength="25"
              [(ngModel)]="consigneeFormData.cnePhoneNo"
              (keydown)="allowOnlyNumbers($event)"
              
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Email -->
   <div class="col-md-6">
  <div class="row align-items-center mb-1">
    <label class="form-label col-2 mb-0">Email</label>
    <div class="col-10">
      <div class="input-group input-group-sm">
        <span class="input-group-text bg-light">
          <i class="bi bi-envelope-fill text-primary"></i>
        </span>
        <input type="email"
               class="form-control"
               name="email"
               [(ngModel)]="consigneeFormData.cneEmail"
               placeholder="Email address"
               (keydown.enter)="focusNext($event)">
        <span type="button" class="btn btn-outline-success verify-btn" title="Verify">
          <i class="bi bi-shield-check"></i>
        </span>
      </div>
    </div>
  </div>
</div>


    <!-- WhatsApp -->
    <div class="col-md-6">
      <div class="row align-items-center mb-1">
        <label class="form-label col-2 mb-0">WhatsApp</label>
        <div class="col-10">
          <div class="input-group input-group-sm">
            <span class="input-group-text bg-light">
              <i class="bi bi-whatsapp text-success"></i>
            </span>
            <input type="tel" class="form-control" placeholder="WhatsApp" (keydown.enter)="focusNext($event)" name="whatsapp"
            [(ngModel)]="consigneeFormData.cneWhatsApp"
            (keydown)="allowOnlyNumbers($event)"
            maxlength="10"
            >  <span type="button" class="btn btn-outline-success verify-btn" title="Verify"
           
            >
          <i class="bi bi-shield-check"></i>
        </span>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>



      <!-- ADDITIONAL -->
      <div class="form-section shadow-sm mb-3">
        <div class="section-header">
          <i class="fas fa-sticky-note section-icon"></i>
          <h5>Additional Information</h5>
        </div>
        <div class="row align-items-start">
          <div class="col-1">
            <label class="form-label mb-0">Remarks</label>
          </div>
          <div class="col-11">
            <textarea class="form-control form-control-sm"
                      name="remark"
                      (keydown.enter)="focusNext($event)"
                      [(ngModel)]="consigneeFormData.cneRemarks"
                      rows="1"
                      placeholder="Additional remarks or notes..."></textarea>
          </div>
        </div>
      </div>

      <!-- ACTIONS -->
      <div class="button-group-modern">
  <button type="button" class="btn btn-outline-danger btn-sm" (click)="closeBtn()">
    <i class="fas fa-times me-1"></i> Close <span class="shortcut">Esc</span>
  </button>
  <button type="submit" class="btn btn-primary btn-sm" [disabled]="consigneeForm.invalid">
    <i class="fas fa-save me-1"></i> Submit <span class="shortcut">F10</span>
  </button>
</div>

    </form>
  </div>
</div>

